# Statement Processor Configuration
# This file configures parsing methods and transaction categorization rules

# Parser configuration - specifies how to process different bank statements
parsers = {
    anz = { method = "content"; };                      # ANZ uses content-based text parsing
    cba = { method = "ai"; provider = "anthropic"; };  # CBA uses AI-powered PDF parsing
};

# AI provider configuration for AI-powered parsing
ai_providers = {
    anthropic = { 
        api_key_env = "ANTHROPIC_API_KEY"; 
        base_url = "https://api.anthropic.com"; 
        model = "claude-3-5-sonnet-20241022"; 
    };
    openrouter = { 
        api_key_env = "OPENROUTER_API_KEY"; 
        base_url = "https://openrouter.ai/api/v1"; 
        model = "anthropic/claude-3.5-sonnet"; 
    };
    llamacpp = { 
        base_url = "http://localhost:8080"; 
        model = "llama-3.1-8b-instruct"; 
    };
};

# Default category for transactions that don't match any pattern
default_category = "Uncategorized";

# Categorization rules
# Rules are evaluated in order - first match wins
# Patterns are case-insensitive regular expressions
categories = (
  # Income & Salary
  { 
    pattern = "SALARY|WAGE|JUMP OPERATIONS|DIRECT CREDIT"; 
    category = "Income"; 
  },
  
  # Transfers & Savings
  { 
    pattern = "TRANSFER.*TO.*|TRANSFER.*FROM.*|PAYMENT.*RECEIVED"; 
    category = "Transfer"; 
  },
  
  # Groceries & Household
  { 
    pattern = "WOOLWORTHS|COLES|ALDI|IGA|WW METRO|MIRCHH MASALA|SUPERMARKET|GROCERY|HARRIS FARM|WHO GIVES A CRAP|HANARO MART|1ST CHOICE|SEASONS SUPERMARKETS|BIO SHOP|SEKO FOODS|GREEK ISLE|TECK CHONG WONG|ALL ABOUT FRUIT|DRAKES|SPUDSHED|FOODLAND|FRESH CHOICE|FOODWORKS|UNITED PETROL.*CONVENIENCE|GOOD PRICE|VIET FRESH|ASIAN GROCERY|THAI HOA ASIAN|BOTANICA REAL FOOD|BERRY SWEET FRUITS|DANS PRODUCE|FIRST FRESH FRUIT|INDOOROOPILLY FRUIT|BARDON SHED|HUEYS FRUITNVEG|ASIAN GREEN GROCER|HELLOFRESH"; 
    category = "Groceries & household"; 
  },
  
  # Food & Dining
  { 
    pattern = "CAFE|COFFEE|RESTAURANT|PIZZA|KITCHEN|BAKERY|DAN MURPHY|BWS|LIQUORLAND|KFC|MCDONALD|HUNGRY JACK|UBER EATS|MENULOG|DELIVEROO|SCOUT CAFE|CAKE AND BAKE|NOODLE|CURRY|BURROW|GELATO|PHAT PHO|STEAKHOUSE|BAR|PUB|BREWING|BREWERY|NODO|MOMIJI|JAPANESE|LE'S KITCHEN|DEATH AND TAXES|NIGHT NOODLE|TORREFAZIONE|LICK|ENOTECA|CANVAS CLUB|SOCIAL|PADDINGTON SOCIAL|JULIUS PIZZERIA|SUNSHINE BEACH|RICK'S ARTISAN|SUM YUNG|WILL & FLOW|CLANDESTINO|PADDINGTON SO|DOMINOS|FIRST TABLE|BOTTEGA|THAI|SUSHI|MILK BAR|FISH & CHIPS|FISH AND CHIPS|CHARCOAL CHICKEN|RED ROOSTER|NANDOS|GRILL|DINING|BISTRO|FIVE STAR BAKE|BAKE|WINERY|BOWLS CLUB|BRASSERIE|IZAKAYA|REMYS|SMP\*LICK|LITTLE ENGINE|FRUITY CAPERS|BELLMERE HONEY|BROUHAHA BREWERY|AMYS KITCHEN|BARDON THYME|INDUSTRY BEANS|RUEAN PHAE|AGNES RESTAURANT|SMOKINJOESPIZZA|MEZBAAN|INDIAN|BAKEOLOGISTS|BANNETON|LONGRIDERS|PIZZERIA|GOLDEN KING BAKERY|GRAB\*|ALCHEMIST|MAXWELL FOOD|TRANSCAB|TRAPEZE|ALIPAY|NAIM RESTAURANT|CHINESE VISA"; 
    category = "Food & dining"; 
  },
  
  # Auto & Transport  
  { 
    pattern = "AMPOL|BP|SHELL|CALTEX|PUMA ENERGY|FUEL|PETROL|UBER.*TRIP|TAXI|LINKT|OPAL|PUBLIC TRANSPORT|MYKI|TRANSPORTFORNSW|TRANSPORTMAINRDS|CATHAYPACAIR|QANTAS|FLIGHTS|ULTRATUNE|SUPER CHEAP AUTO|MRS LUU|CARLOS SUPA IGA.*TRANSPORT|UNITED PETROL|7-ELEVEN FUEL|7-ELEVEN.*[0-9]|COLES EXPRESS|EG GROUP|SPEEDWAY|FREEDOM FUELS|PARKING|CAR PARK|METRO PETROLEUM|LIBERTY OIL|VIVA ENERGY|TOLL|E-TOLL|JETSTAR|VIRGIN AUSTRALIA|TIGERAIR|REX AIRLINES|BUS|TRAIN|FERRY|TRANSLINK|SIXT|YELLOWCAB|CURB.*TAXI|BUS/MRT"; 
    category = "Auto & transport"; 
  },
  
  # Bills & Utilities
  { 
    pattern = "TPG INTERNET|VAYA PTY LTD|VODAFONE|TELSTRA|OPTUS|MOBILE|PHONE|ELECTRICITY|GAS|WATER|RACQ|TMR REG RENEW|ALLIANZ INSURANCE|DIRECT DEBIT.*VODAFONE|AMO GELATO|ORIGIN ENERGY|AGL|ENERGY AUSTRALIA|ERGON ENERGY|ENERGEX|SIMPLY ENERGY|RED ENERGY|MOMENTUM ENERGY|LUMO ENERGY|POWERSHOP|DODO|IINET|AUSSIE BROADBAND|BELONG|SOUTHERN PHONE|COUNCIL|RATES|REGO|REGISTRATION|INSURANCE.*AUTO|INSURANCE.*HOME|INSURANCE.*LIFE|BUDGET DIRECT|YOUI|REAL INSURANCE|URBAN UTILITIES|QUEENSLAND URBAN UTI|AAI LTD|TERRI SCHEER|AUTO & GENERAL SERVICES"; 
    category = "Bills & utilities"; 
  },
  
  # Health & Medical
  { 
    pattern = "CHEMIST WAREHOUSE|PHARMACY|DOCTOR|MEDICAL|HEALTH|DENTIST|BARDON SMILES|NIGGLES & KNOTS|RED HILL PHARMACY|JARROT WARD CHEMIS|PRICELINE|TERRY WHITE|SOUL PATTINSON|AMCAL|DISCOUNT DRUG|CLINIC|PHYSIOTHERAPY|PHYSIO|OPTOMETRIST|SPECSAVERS|OPSM|OSCAR WYLEE|HOSPITAL|PATHOLOGY|RADIOLOGY|MEDICARE|GP|SUPERCLINIC|TUH"; 
    category = "Health & medical"; 
  },
  
  # Fitness & Beauty
  { 
    pattern = "FUNCTION WELL|DBS\*Function Well|DBS\*Goodlife|ANYTIME FITNESS|99 BIKES|2XU|BRISBANE PILATES|YOGA|FITNESS|GYM|LSG FITNESS|BRISBANE PILATES|EZI\*Brisbane Pilates|NUTRITION WAREHOUSE"; 
    category = "Fitness & beauty"; 
  },
  
  # Entertainment & Recreation
  { 
    pattern = "SPOTIFY|NETFLIX|DISNEY|STAN|CINEMA|MOVIE|THEATRE|STEAM|NETHERWORLD|CULTURAL CENTRE|TRIFFID|ITCH.IO|AUDIBLE|HEADSPACE"; 
    category = "Entertainment"; 
  },
  
  # Retail Shopping
  { 
    pattern = "TARGET|KMART|MYER|DAVID JONES|AMAZON|EBAY|APPLE R466|JB HI FI|OFFICEWORKS|UNIVERSAL STORE|BLACK SHEEP COFFEE|THE SOURCE|KATHMANDU|UMART|ZERO FOX|DUTCH VINYL|STEAM GAMES|2XU PTY|PICCOLO PAPA|ALQUEMIE|CIELTEK|BIG W|HARVEY NORMAN|THE GOOD GUYS|REBEL SPORT|BCF|ANACONDA|SPOTLIGHT|FANTASTIC FURNITURE|IKEA|FREEDOM|TEMPLE & WEBSTER|CATCH\.COM|THE ICONIC|ASOS|ZALORA|CITY BEACH|COTTON ON|H&M|ZARA|UNIQLO|ASCOLOUR|JUST JEANS|GORMAN|MACPAC|TICKETMASTER|COMICS|TYPO|KNOCKOUT GEAR|CORBETT.*CLAUDE|LSKD\.CO|ADAIRS"; 
    category = "Retail shopping"; 
  },
  
  # Home & Renovation
  { 
    pattern = "BUNNINGS|KITCHEN WAREHOUSE|PADDINGTON HARDWARE|INDUSTRY BEANS|VIDEOPRO|RAIZ|MOSCONI|THE WOODS|DIRECT DEBIT.*RAIZ|NICK SCALI|RODF POOL SERVICES|FACTORY DIRECT SHUTTER|HAYMANS ELECTRICAL|BRISBANE REMOVALISTS"; 
    category = "Home & renovation"; 
  },
  
  # Financial Services
  { 
    pattern = "PAYPAL|28 DEGREES|ANZ CARDS|CREDIT CARD|BPAY|AUTO & GENERAL SERVICES|UNISUPER|AFTERPAY|ZIP PAY|COMMBANK|WESTPAC|NAB|ANZ BANK|BENDIGO BANK|SUNCORP|BANK OF QUEENSLAND|BOQ|ING|MACQUARIE BANK|CITIBANK|HSBC|ST GEORGE|BANKWEST|CREDIT UNION|ATM FEE|TRANSACTION FEE|INTEREST CHARGED|OVERDRAFT|REVOLUT|SUPER CONTRIB|MEM VOL CON"; 
    category = "Financial"; 
  },
  
  # Professional Services
  { 
    pattern = "PROTON|VPN|MICROSOFT|APPLE\\.COM|VENTRAIP|BITWARDEN|KOBO SOFTWARE|SOFTWARE|SUBSCRIPTION|STREAMING"; 
    category = "Professional services"; 
  },
  
  # Travel & Accommodation 
  {
    pattern = "HOTEL|SLSC|ISLAND SURF|RAFIKI|COOLUM|NOOSA|MERMAID BEACH|DISPOSABLE HEROES|ALPHABET CAFE|UGLY MUG|FIVEWAYS ESPRESSO|RITA'S TEQUILA|ROYAL GEORGE|PUBLIC BARBER|TAMBORINE MOUNTAIN|SANDSTONE POINT|ST BERNARDS|BACKGROUND BARISTA|LAND & SEA|LIGHT YEARS|CBEACH|MOTO PTY|SSHINE BCH"; 
    category = "Travel"; 
  },
  
  # Gifts & Donations
  {
    pattern = "TRANSFER.*TO.*KATE|TRANSFER.*TO.*JACOB|TRANSFER.*TO.*SUSAN|TRANSFER.*TO.*MONICA|TRANSFER.*TO.*BIRCH|ST VINCENT DE PAUL"; 
    category = "Gifts & donations"; 
  },
  
  # Education & Events
  {
    pattern = "FUNCTION W.*FW 5 DAY|YOGA IN DAILY|SUPER FUN DAY|MEANDU.*EVENTS|CULTURAL CENTRE|TRIFFID"; 
    category = "Education"; 
  },
  
  # Personal Care & Beauty
  {
    pattern = "PUBLIC BARBER|EXPERT BARBERSHOP|CHAMP KITCHEN|HAIRHOUSE|JUST CUTS|FANTASTIC SAMS|BARBER SHOP|HAIR SALON|BEAUTY SALON|NAIL BAR|WAXING|SPA|MASSAGE|ENDOTA SPA|ELLA BACHE|FACE VALUE"; 
    category = "Personal care"; 
  },
  
  # Government & Tax
  {
    pattern = "TAX OFFICE|HECS|ATO|AUSTRALIAN TAXATION|CENTRELINK|MEDICARE|CHILD SUPPORT|RATES|COUNCIL|REGISTRATION|TMR|VICROADS|SERVICE SA|SERVICE NSW|QLD TRANSPORT|QLD TREASURY|STAMP DUTY|FINE|PENALTY|COURT|BCC RATES|BCC.*PERMITS|BCC.*EPERMITS|BCC.*PARKING|TMR REG RENEW|REG RENEW|REGO|CHINESE VISA|VISA|USCUSTOMS|ESTA"; 
    category = "Government & tax"; 
  },
  
  # Pets & Animals
  {
    pattern = "VET|VETERINARY|PETBARN|PET STOCK|GREENCROSS|PET CIRCLE|DOG FOOD|CAT FOOD|PET FOOD|ANIMAL HOSPITAL|DOG WASH|PET GROOMING";
    category = "Pets"; 
  },
  
  # Gambling & Gaming
  {
    pattern = "TAB|SPORTSBET|LADBROKES|BET365|CROWN|STAR CITY|RSL|POKER MACHINE|POKIES|CASINO|LOTTO|POWERBALL|TATTS|KENO";
    category = "Gambling"; 
  },
  
  # Post & Communications
  {
    pattern = "POST|AUSTRALIA POST|LPO|POSTAL|POSTAGE|MAIL";
    category = "Post & communications"; 
  }
);
